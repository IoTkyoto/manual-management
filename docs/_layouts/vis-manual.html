<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
    <head>
    <title>{{page.title}}</title>

    {% if site.google_analytics %}
        <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '{{ site.google_analytics }}');
        </script>
    {% endif %}
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $("a[href^='http']:not([href*='" + location.hostname + "'])").attr('target', '_blank');
        });
    </script>

    <meta charset="UTF-8">

{% seo %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.4/css/all.css">
    </head>
    <body>
    <!-- <a id="skip-to-content" href="#content">Skip to the content.</a> -->

    <header class="page-header" role="banner">
        <h1 class="project-name">{{ page.title | default: site.title | default: site.github.repository_name }}</h1>
    </header>

    <main id="content" class="main-content" role="main">
        {{ content }}
        <div class="contents-box">
        </div>
        <div id="page_top"><a href="#"></a></div>
        <footer class="site-footer">
        {% if site.github.is_project_page %}
            <span class="site-footer-owner"><a href="{{ site.github.repository_url }}">{{ site.github.repository_name }}</a> is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a>.</span>
        {% endif %}
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
        </footer>
    </main>
    </body>
    <script>
        const changeContentsSize = () => {
            const contentsBoxWidth = (($(window).width() - $("#content").width()) / 2) - $(window).width() * 0.02;
            const contentsBoxTop = $("header").outerHeight();
            $(".contents-box").css('top', contentsBoxTop)
            $(".contents-box").width(contentsBoxWidth);
        };
        if (
            location.pathname.indexOf("ja") >= 0 &&
            window.navigator.language !== "ja"
        ) {
            location.href = "/manual-management/vis-manual/eg/";
        } else if (
            location.pathname.indexOf("eg") >= 0 &&
            window.navigator.language === "ja"
        ) {
            location.href = "/manual-management/vis-manual/ja/";
        }
        let contentsList = [];
        if (location.pathname.indexOf("ja") >= 0) {
            contentsList = [
                { "title": "[ステップ 0] 事前準備", "link": "#step0" },
                {
                    "title": "[ステップ 1] DynamoDBテーブルを構築する",
                    "link": "#step1",
                },
                { "title": "[ステップ 2] IAM Access Keyを取得する", "link": "#step2" },
                {
                    "title": "[ステップ 3] IoT.kyoto VISのアカウントを使ってログインする",
                    "link": "#step3",
                },
                { "title": "[ステップ 4] グラフ画面で可視化する", "link": "#step4" },
                { "title": "[付録 1] グラフ設定を変更する", "link": "#option1" },
                { "title": "[付録  2] アラートの設定をする", "link": "#option2" },
                { "title": "[付録 3] 過去データを検索する", "link": "#option3" },
                { "title": "[付録 4] csv をダウンロードする", "link": "#option4" },
                { "title": "[付録 5] グラフを並び替える", "link": "#option5" },
                { "title": "[付録 6] グラフを削除する", "link": "#option6" },
            ];
        } else if (location.pathname.indexOf("eg") >= 0) {
            contentsList = [
                { "title": "[Step 0] Advance preparation", "link": "#step0" },
                {
                    "title": "[Step 1] Build a DynamoDB table",
                    "link": "#step1",
                },
                { "title": "[Step 2] Get IAM Access Key", "link": "#step2" },
                {
                    "title": "[Step 3] IoT.kyoto VISのアカウントを使ってログインする",
                    "link": "#step3",
                },
                { "title": "[Step 4] Visualize on graph screen", "link": "#step4" },
                { "title": "[Option 1] Change graph settings", "link": "#option1" },
                { "title": "[Option 2] Set alerts", "link": "#option2" },
                { "title": "[Option 3] Search past data", "link": "#option3" },
                { "title": "[Option 4] download csv", "link": "#option4" },
                { "title": "[Option 5] Rearrange graph", "link": "#option5" },
                { "title": "[Option 6] Delete graph", "link": "#option6" },
            ];
        }
        contentsList.forEach(content => {
            $('.contents-box').append(`<div><a href="${content.link}">${content.title}</a></div>`)
        })
        changeContentsSize();
        $(window).resize(changeContentsSize);
    </script>
</html>

<style>
.contents-box{
    position:fixed;
    max-width: 24rem;
    top: 25%;
    right: 2%;
    font-size: 1.2em;
    padding: 8px;
    height: 60%;
    overflow: auto;
}
.contents-box div {
    padding: 2px 0;
}
.contents-box div:hover {
    background-color: #eff7ff;
}
/* タブレットのときはコンテンツメニューを非表示にする */
@media screen and (max-width:1024px) {
    .contents-box {
        display: none;
    }
}
#page_top{
    width: 50px;
    height: 50px;
    position: fixed;
    right: 2%;
    bottom: 2%;
    background: #ffa500;
    opacity: 0.9;
    border-radius: 50%;
}
#page_top a{
    position: relative;
    display: block;
    width: 50px;
    height: 50px;
    text-decoration: none;
}
#page_top a::before{
    font-family: 'Font Awesome 5 Free';
    font-weight: 900;
    content: '\f106';
    font-size: 25px;
    color: #fff;
    position: absolute;
    width: 25px;
    height: 25px;
    top: -12px;
    bottom: 0;
    right: 0;
    left: 0;
    margin: auto;
    text-align: center;
}
</style>
